import{_ as I,y as P,r as h,M as R,o as U,c as n,b as o,d as s,e as a,z as W,k as $,j as q,w as c,f as d,A,i as m,B as K,C as O,n as b,N as Q,l as H,F as x,E as B,t as u,O as G,P as J,v as N,L as X,I as Y,Q as Z,H as ss}from"./index-BNZe5Fbc.js";const es={class:"search"},ts={class:"container"},as={class:"search-header"},os={class:"search-box-wrapper glass"},ls={key:0,class:"hot-search"},ns={class:"section-header"},cs={class:"section-title"},rs={key:0,class:"loading"},is={key:1,class:"hot-grid"},ds=["onClick"],us={class:"hot-content"},_s={class:"hot-word"},vs={class:"hot-desc"},hs={key:1,class:"search-results"},ps={class:"result-header"},fs={class:"result-title"},ys={key:0,class:"loading"},ks={key:1,class:"no-result glass"},gs={key:2,class:"result-grid"},ms=["onClick"],bs={class:"song-cover-wrapper"},ws={class:"play-overlay"},Cs={class:"song-details"},Ss={class:"song-name"},zs={class:"song-artist"},Hs={class:"song-album"},xs={__name:"Search",setup(Bs){const V=X(),L=P(),r=h(""),_=h([]),w=h([]),f=h(!1),y=h(!0),k=h(!1),M=async()=>{try{y.value=!0;const t=await N.getSearchHot();w.value=t.data||[]}catch(t){console.error("获取热搜失败:",t)}finally{y.value=!1}},p=async()=>{var t;if(r.value.trim())try{f.value=!0,k.value=!0;const e=await N.search(r.value,1);_.value=((t=e.result)==null?void 0:t.songs)||[]}catch(e){console.error("搜索失败:",e),_.value=[]}finally{f.value=!1}},T=t=>{r.value=t,p()},j=()=>{k.value=!1,r.value="",_.value=[]},D=t=>{L.playSong(t,_.value)},E=t=>t===0?"rank-1":t===1?"rank-2":t===2?"rank-3":"";return R(()=>V.query.keyword,t=>{t&&(r.value=t,p())},{immediate:!0}),U(()=>{M()}),(t,e)=>{const i=m("el-icon"),C=m("el-button"),F=m("el-image");return o(),n("div",es,[s("div",ts,[s("div",as,[s("div",os,[a(i,{class:"search-icon"},{default:c(()=>[a(d(A))]),_:1}),W(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),onKeyup:O(p,["enter"]),placeholder:"搜索你喜欢的音乐...",class:"search-input"},null,544),[[K,r.value]]),r.value?(o(),$(C,{key:0,type:"danger",size:"large",onClick:p,class:"search-button",round:""},{default:c(()=>[...e[1]||(e[1]=[b(" 搜索 ",-1)])]),_:1})):q("",!0)])]),k.value?(o(),n("div",hs,[s("div",ps,[s("h2",fs,' 搜索 "'+u(r.value)+'" 的结果 ',1),a(C,{text:"",onClick:j,class:"back-btn"},{default:c(()=>[a(i,null,{default:c(()=>[a(d(G))]),_:1}),e[4]||(e[4]=b(" 返回热搜 ",-1))]),_:1})]),f.value?(o(),n("div",ys,[a(i,{class:"is-loading",size:40},{default:c(()=>[a(d(H))]),_:1}),e[5]||(e[5]=s("p",null,"搜索中...",-1))])):_.value.length===0?(o(),n("div",ks,[a(i,{size:80,class:"empty-icon"},{default:c(()=>[a(d(J))]),_:1}),e[6]||(e[6]=s("p",{class:"empty-text"},"没有找到相关结果",-1)),e[7]||(e[7]=s("p",{class:"empty-tip"},"试试其他关键词吧",-1))])):(o(),n("div",gs,[(o(!0),n(x,null,B(_.value,l=>{var v,g,S;return o(),n("div",{key:l.id,class:"result-card glass",onClick:z=>D(l)},[s("div",bs,[a(F,{src:(v=l.al)==null?void 0:v.picUrl,fit:"cover",class:"song-cover",lazy:""},null,8,["src"]),s("div",ws,[a(i,{class:"play-icon-large"},{default:c(()=>[a(d(ss))]),_:1})])]),s("div",Cs,[s("div",Ss,u(l.name),1),s("div",zs,u((g=l.ar)==null?void 0:g.map(z=>z.name).join(" / ")),1),s("div",Hs,u((S=l.al)==null?void 0:S.name),1)])],8,ms)}),128))]))])):(o(),n("div",ls,[s("div",ns,[s("h2",cs,[a(i,{class:"title-icon"},{default:c(()=>[a(d(Q))]),_:1}),e[2]||(e[2]=b(" 热搜榜 ",-1))]),e[3]||(e[3]=s("span",{class:"section-subtitle"},"大家都在搜",-1))]),y.value?(o(),n("div",rs,[a(i,{class:"is-loading",size:40},{default:c(()=>[a(d(H))]),_:1})])):(o(),n("div",is,[(o(!0),n(x,null,B(w.value.slice(0,12),(l,v)=>(o(),n("div",{key:v,class:"hot-card glass",onClick:g=>T(l.searchWord)},[s("div",{class:Y(["hot-rank",E(v)])},u(v+1),3),s("div",us,[s("div",_s,u(l.searchWord),1),s("div",vs,u(l.content),1)]),a(i,{class:"hot-arrow"},{default:c(()=>[a(d(Z))]),_:1})],8,ds))),128))]))]))])])}}},Vs=I(xs,[["__scopeId","data-v-b8c2c2e4"]]);export{Vs as default};
