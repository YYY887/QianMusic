import{_ as w,u as x,y as C,r as p,o as M,v as f,c as a,b as l,d as s,j as B,t as i,n as L,F as V,E as b}from"./index-BNZe5Fbc.js";import{u as z}from"./useToast-BHrU_uqz.js";const j={class:"my-liked-songs"},D={class:"header glass"},I={class:"header-content"},N={class:"header-info"},R={class:"stats"},$={class:"content"},E={key:0,class:"loading"},F={key:1,class:"empty"},T={key:2,class:"song-list"},U=["onClick"],A={class:"song-index"},H=["src"],P={class:"song-info"},q={class:"song-name"},G={class:"song-artist"},J={class:"song-album"},K={class:"song-duration"},O={__name:"MyLikedSongs",setup(Q){const y=x(),c=C(),u=z(),r=p(!0),o=p([]),m=n=>{const t=Math.floor(n/6e4),e=Math.floor(n%6e4/1e3);return`${t}:${e.toString().padStart(2,"0")}`},k=(n,t)=>{c.playSong(n,o.value)},S=()=>{o.value.length>0&&c.playSong(o.value[0],o.value)};return M(async()=>{try{r.value=!0;const n=y.userId;if(!n){u.error("获取用户信息失败");return}const e=(await f.getLikedSongs(n)).ids||[];if(e.length===0){o.value=[];return}const d=await f.getSongDetail(e.join(","));o.value=d.songs||[]}catch(n){console.error("获取喜欢的音乐失败:",n),u.error("加载失败")}finally{r.value=!1}}),(n,t)=>(l(),a("div",j,[s("div",D,[s("div",I,[t[1]||(t[1]=s("div",{class:"icon-wrapper"},[s("svg",{viewBox:"0 0 24 24",width:"60",height:"60"},[s("path",{fill:"#fff",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1)),s("div",N,[t[0]||(t[0]=s("h1",null,"我喜欢的音乐",-1)),s("p",R,i(o.value.length)+" 首歌曲",1)])]),o.value.length>0?(l(),a("button",{key:0,class:"play-all-btn",onClick:S},[...t[2]||(t[2]=[s("svg",{viewBox:"0 0 24 24",width:"20",height:"20"},[s("path",{fill:"currentColor",d:"M8 5v14l11-7z"})],-1),L(" 播放全部 ",-1)])])):B("",!0)]),s("div",$,[r.value?(l(),a("div",E,[...t[3]||(t[3]=[s("div",{class:"spinner"},null,-1),s("p",null,"加载中...",-1)])])):o.value.length===0?(l(),a("div",F,[...t[4]||(t[4]=[s("svg",{viewBox:"0 0 24 24",width:"80",height:"80"},[s("path",{fill:"currentColor",d:"M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"})],-1),s("p",null,"还没有喜欢的音乐",-1)])])):(l(),a("div",T,[(l(!0),a(V,null,b(o.value,(e,d)=>{var v,_,g;return l(),a("div",{key:e.id,class:"song-item",onClick:h=>k(e)},[s("div",A,i(d+1),1),s("img",{src:(v=e.al)==null?void 0:v.picUrl,class:"song-cover",loading:"lazy"},null,8,H),s("div",P,[s("div",q,i(e.name),1),s("div",G,i((_=e.ar)==null?void 0:_.map(h=>h.name).join(" / ")),1)]),s("div",J,i((g=e.al)==null?void 0:g.name),1),s("div",K,i(m(e.dt)),1)],8,U)}),128))]))])]))}},Y=w(O,[["__scopeId","data-v-88f2f319"]]);export{Y as default};
