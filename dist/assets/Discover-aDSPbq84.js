import{_ as M,y as R,r as _,o as T,c as r,b as o,d as e,e as s,n as u,w as i,f as n,h as $,i as v,z as q,k as x,j as A,A as C,B as G,C as H,D as I,l as S,F as D,E as z,G as L,v as b,x as J,H as B,t as y}from"./index-BNZe5Fbc.js";const O={class:"discover"},Q={class:"container"},W={class:"header-section"},X={class:"page-title"},Y={class:"search-wrapper glass"},Z={class:"section"},ss={class:"section-title"},es={key:0,class:"loading"},as={key:1,class:"daily-grid"},ts=["onClick"],ls={class:"daily-cover-wrapper"},os={class:"play-overlay"},is={class:"daily-info"},ns={class:"daily-name"},cs={class:"daily-artist"},rs={class:"section"},ds={class:"section-title"},_s={key:0,class:"loading"},us={key:1,class:"playlist-grid"},vs={class:"playlist-cover-wrapper"},ys={class:"play-count"},ps={class:"playlist-name"},hs={__name:"Discover",setup(fs){const P=J(),V=R(),d=_(""),p=_([]),m=_([]),h=_(!0),f=_(!0),F=async()=>{var a;try{h.value=!0;const t=await b.getDailyRecommend();p.value=((a=t.data)==null?void 0:a.dailySongs)||[]}catch(t){console.error("获取每日推荐失败:",t)}finally{h.value=!1}},N=async()=>{try{f.value=!0;const a=await b.getPersonalized();m.value=a.result||[]}catch(a){console.error("获取推荐歌单失败:",a)}finally{f.value=!1}},K=a=>{V.playSong(a,p.value)},g=()=>{d.value.trim()&&P.push({path:"/search",query:{keyword:d.value}})},U=a=>a>=1e8?(a/1e8).toFixed(1)+"亿":a>=1e4?(a/1e4).toFixed(1)+"万":a;return T(()=>{F(),N()}),(a,t)=>{const c=v("el-icon"),j=v("el-button"),k=v("el-image"),E=v("router-link");return o(),r("div",O,[e("div",Q,[e("div",W,[e("h1",X,[s(c,null,{default:i(()=>[s(n($))]),_:1}),t[1]||(t[1]=u(" 发现音乐 ",-1))]),e("div",Y,[s(c,{class:"search-icon"},{default:i(()=>[s(n(C))]),_:1}),q(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),placeholder:"搜索歌曲、歌手、专辑",class:"search-input",onKeyup:H(g,["enter"])},null,544),[[G,d.value]]),d.value?(o(),x(j,{key:0,icon:n(C),type:"danger",round:"",onClick:g,class:"search-btn"},{default:i(()=>[...t[2]||(t[2]=[u(" 搜索 ",-1)])]),_:1},8,["icon"])):A("",!0)])]),e("section",Z,[e("h2",ss,[s(c,null,{default:i(()=>[s(n(I))]),_:1}),t[3]||(t[3]=u(" 每日推荐 ",-1))]),h.value?(o(),r("div",es,[s(c,{class:"is-loading",size:40},{default:i(()=>[s(n(S))]),_:1})])):(o(),r("div",as,[(o(!0),r(D,null,z(p.value.slice(0,10),l=>(o(),r("div",{key:l.id,class:"daily-card glass",onClick:w=>K(l)},[e("div",ls,[s(k,{src:l.al.picUrl,fit:"cover",class:"daily-cover",lazy:""},null,8,["src"]),e("div",os,[s(c,{size:40,color:"white"},{default:i(()=>[s(n(B))]),_:1})])]),e("div",is,[e("div",ns,y(l.name),1),e("div",cs,y(l.ar.map(w=>w.name).join(" / ")),1)])],8,ts))),128))]))]),e("section",rs,[e("h2",ds,[s(c,null,{default:i(()=>[s(n(L))]),_:1}),t[4]||(t[4]=u(" 推荐歌单 ",-1))]),f.value?(o(),r("div",_s,[s(c,{class:"is-loading",size:40},{default:i(()=>[s(n(S))]),_:1})])):(o(),r("div",us,[(o(!0),r(D,null,z(m.value,l=>(o(),x(E,{key:l.id,to:`/playlist/${l.id}`,class:"playlist-card glass"},{default:i(()=>[e("div",vs,[s(k,{src:l.picUrl,fit:"cover",class:"playlist-cover",lazy:""},null,8,["src"]),e("div",ys,[s(c,null,{default:i(()=>[s(n(B))]),_:1}),u(" "+y(U(l.playCount)),1)])]),e("div",ps,y(l.name),1)]),_:2},1032,["to"]))),128))]))])])])}}},gs=M(hs,[["__scopeId","data-v-bf5a4356"]]);export{gs as default};
